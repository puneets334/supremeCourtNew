var map,$poiList=$(".sc-js-poi-list");scutum.pages.poiListing={},scutum.pages.poiListing.init=function(){scutum.forms.common.rating(),scutum.pages.poiListing.map()},scutum.pages.poiListing.map=function(){scutum.require(["gmaps","snazzy-infowindow"],function(){var s=41.9027835,i=12.4963655,n=14;map=new GMaps({el:"#sc-js-poi-map",lat:s,lng:i,zoom:n}),scutum.$win.on("resize",scutum.helpers.debounce(function(){var e=s,t=i;map.refresh(),map.setCenter(e,t)},200));map.addStyle({styledMapName:"Ultra Light with Labels",styles:[{featureType:"water",elementType:"geometry",stylers:[{color:"#e9e9e9"},{lightness:17}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#f5f5f5"},{lightness:20}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ffffff"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#ffffff"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:16}]},{featureType:"poi",elementType:"geometry",stylers:[{lightness:10}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#dedede"},{lightness:21}]},{elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#ffffff"},{lightness:16}]},{elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#333333"},{lightness:40}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#f2f2f2"},{lightness:19}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#fefefe"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#fefefe"},{lightness:17},{weight:1.2}]}],mapTypeId:"snazzyMaps-151"}),map.setStyle("snazzyMaps-151"),scutum.helpers.ajax("data/pages/poi.json","GET","json").then(function(e){e.forEach(function(t){var e=t.main?"assets/img/map-marker-main.svg":"assets/img/map-marker.svg",s=map.addMarker({lat:t.lat,lng:t.lng,title:t.title,icon:e,click:function(e){}}),i=t.address||t.info,a='<div class="sc-iw-title">'+t.title+'</div><div class="sc-iw-body">'+i+'</div><div class="sc-iw-footer"><a href="'+t.link+'"  class="sc-link-external" target="_blank"><span>Wikipedia</span></a></div>',o=t.id,l=new SnazzyInfoWindow({marker:s,content:a,maxWidth:320,closeButtonMarkup:'<button type="button" class="uk-button uk-button-link sc-iw-close"><i class="mdi mdi-close"></i></button>',closeWhenOthersOpen:!0,border:!1,callbacks:{open:function(){$poiList.find('[data-poi-id="'+o+'"]').addClass("uk-active");var e=l.getWrapper();$(e).find(".sc-iw-close").on("click",function(){l.close()})},close:function(){$poiList.find('[data-poi-id="'+o+'"]').removeClass("uk-active")}}});$poiList.on("click",'[data-poi-id="'+o+'"]',function(){var e=scutum.helpers.mq.mediumMin()?t.lat:parseFloat(t.lat)+parseFloat("0.006");map.once("idle",function(){l.open()}),map.setCenter(e,t.lng,function(){map.getZoom()<n&&map.setZoom(n),scutum.helpers.mq.mediumMax()&&scutum.$offcanvas.length&&UIkit.offcanvas(scutum.$offcanvas).hide()})})}),map.fitZoom()})},!1)};