scutum.plugins.idleTimeout={},scutum.plugins.idleTimeout.init=function(){scutum.require(["idle-timeout"],function(){scutum.$body.append('<div class="uk-modal" id="sc-modal-idle"><div class="uk-modal-dialog"><div class="uk-modal-body"><h3 class="uk-modal-title">Your session is about to expire!</h3><hr><p class="uk-margin-remove">You\'ve been inactive for a while. For your security, we\'ll log you out automatically.</p><p class="uk-margin-remove">Click "Stay Online" to continue your session.</p><p>Your session will expire in <span class="sc-text-semibold md-color-red-600" id="sc-session-timer"></span> second(s).</p></div><div class="uk-modal-footer uk-text-right"><button id="sc-session-stay" type="button" class="sc-button sc-button-flat uk-modal-close">Stay Online</button><button type="button" class="sc-button sc-button-outline sc-button-outline-primary uk-margin-small-left" id="sc-session-logout">Logout</button></div></div></div>');var s=UIkit.modal("#sc-modal-idle",{bgClose:!1,escClose:!1}),u={inactiveTimeout:5e3,warningTimeout:3e4,minWarning:5e3,warningStart:null,warningTimer:null,autologout:{url:"login_page.html"},logout:function(){window.location=u.autologout.url}},l=$("#sc-session-timer").html(u.warningTimeout/1e3);$(document).on("idle.idleTimer",function(t,i,o){var n=+new Date-o.lastActive-o.timeout,e=+new Date-n;n>=u.warningTimeout||e<=u.minWarning?s.hide():(l.html(Math.round((u.warningTimeout-n)/1e3)),s.show(),u.warningStart=+new Date-n,u.warningTimer=setInterval(function(){var t=Math.round(u.warningTimeout/1e3-(+new Date-u.warningStart)/1e3);0<=t?l.html(t):u.logout()},1e3))}),scutum.$body.on("click","#sc-session-stay",function(){clearTimeout(u.warningTimer),s.hide()}).on("click","#sc-session-logout",function(){u.logout()}),$(document).idleTimer(u.inactiveTimeout)})};